<!DOCTYPE html>

<html lang="ja">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>
  
    draft-uberti-mmusic-nombis-00
  
 日本語訳</title>

      <link rel="shortcut icon" type="image/x-icon"
    href="https://tex2e.github.io/rfc-translater/favicon.ico" />

  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">

  <link rel="stylesheet" href="master.css">
  <script src="index.js"></script>

  <script>
    var host = window.location.hostname;
    if (host != "localhost") {
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
      ga('create', 'UA-75892425-1', 'auto');
      ga('send', 'pageview');
    }
  </script>

  </head>
  <body>
      <nav class="navbar navbar-expand navbar-light bg-light">
    <a class="navbar-brand" href="index.html">RFC Trans</a>
    <div class="collapse navbar-collapse" id="navbarText">
      <div class="navbar-nav mr-auto">
        <a class="nav-item nav-link" href="privacy-policy.html">Privacy Policy</a>
        <a class="nav-item nav-link" href="contact.html">Contact</a>
        <a class="nav-item nav-link" href="../figs/html/index.html">Figs</a>
      </div>
      <div class="navbar-nav ml-auto">
        <span class="navbar-text"><small>@tex2e</small></span>
      </div>
    </div>
  </nav>

    <span id="rfc_number" class="hidden">https://datatracker.ietf.org/doc/html/draft-uberti-mmusic-nombis-00</span>
    <div style="height: 1ex;"></div>
    <div style="float: right; position: sticky; top: 0;">
      <button type="button" class="btn btn-light btn-sm">
        <a href="https://tools.ietf.org/html/rfchttps://datatracker.ietf.org/doc/html/draft-uberti-mmusic-nombis-00">Orig</a>
      </button>
    </div>
    <div class="container">
      <div class="row">
        <div class="col-sm-12 col-md-12">
          <div class="alert alert-info" role="alert">
            <h4 class="alert-heading">
  
    draft-uberti-mmusic-nombis-00
  
 日本語訳</h4>
            <span class="URL"
              >URL :
              <a href="https://tools.ietf.org/html/rfchttps://datatracker.ietf.org/doc/html/draft-uberti-mmusic-nombis-00">
                https://tools.ietf.org/html/rfchttps://datatracker.ietf.org/doc/html/draft-uberti-mmusic-nombis-00
              </a> </span
            ><br />
            <span class="title_ja">
              タイトル : <strong>
  
    draft-uberti-mmusic-nombis-00
  
</strong></span
            ><br />
            <span class="updated_by">翻訳編集 : 自動生成</span
            ><br />
          </div>
        </div>
      </div>
      <div class="row">
        <div class="col-sm-12 col-md-12">
          <pre class="text text-monospace">
[Search] [pdf|bibtex] [Tracker] [Email] [Nits]
        </pre
          >
        </div>

      </div>
      <div class="row">
        <div class="col-sm-12 col-md-6">
          <p class="text indent-0">
            Versions: Network Working Group J. Uberti Internet-Draft Google Intended status: Standards Track J. Lennox Expires: September 10, 2015 Vidyo March 09, 2015
          </p>
        </div>        
      </div>
      <div class="row">
        <div class="col-sm-12 col-md-6">
          <p class="text indent-16">
            Improvements to ICE Candidate Nomination draft-uberti-mmusic-nombis-00
          </p>
        </div>        
      </div>
      <div class="row">
        <div class="col-sm-12 col-md-6">
          <p class="text indent-0">
            Abstract
          </p>
        </div>        
      </div>
      <div class="row">
        <div class="col-sm-12 col-md-6">
          <p class="text indent-3">
            This document makes recommendations for simplifying and improving the procedures for candidate nomination in Interactive Connectivity Establishment (ICE).
          </p>
        </div>        
      </div>
      <div class="row">
        <div class="col-sm-12 col-md-6">
          <p class="text indent-0">
            Status of This Memo
          </p>
        </div>        
      </div>
      <div class="row">
        <div class="col-sm-12 col-md-6">
          <p class="text indent-3">
            This Internet-Draft is submitted in full conformance with the provisions of BCP 78 and BCP 79.
          </p>
        </div>        
      </div>
      <div class="row">
        <div class="col-sm-12 col-md-6">
          <p class="text indent-3">
            Internet-Drafts are working documents of the Internet Engineering Task Force (IETF). Note that other groups may also distribute working documents as Internet-Drafts. The list of current Internet-Drafts is at http://datatracker.ietf.org/drafts/current/.
          </p>
        </div>        
      </div>
      <div class="row">
        <div class="col-sm-12 col-md-6">
          <p class="text indent-3">
            Internet-Drafts are draft documents valid for a maximum of six months and may be updated, replaced, or obsoleted by other documents at any time. It is inappropriate to use Internet-Drafts as reference material or to cite them other than as &#34;work in progress.&#34;
          </p>
        </div>        
      </div>
      <div class="row">
        <div class="col-sm-12 col-md-6">
          <p class="text indent-3">
            This Internet-Draft will expire on September 10, 2015.
          </p>
        </div>        
      </div>
      <div class="row">
        <div class="col-sm-12 col-md-6">
          <p class="text indent-0">
            Copyright Notice
          </p>
        </div>        
      </div>
      <div class="row">
        <div class="col-sm-12 col-md-6">
          <p class="text indent-3">
            Copyright (c) 2015 IETF Trust and the persons identified as the document authors. All rights reserved.
          </p>
        </div>        
      </div>
      <div class="row">
        <div class="col-sm-12 col-md-6">
          <p class="text indent-3">
            This document is subject to BCP 78 and the IETF Trust&#39;s Legal Provisions Relating to IETF Documents (http://trustee.ietf.org/license-info) in effect on the date of publication of this document. Please review these documents carefully, as they describe your rights and restrictions with respect to this document. Code Components extracted from this document must include Simplified BSD License text as described in Section 4.e of the Trust Legal Provisions and are provided without warranty as described in the Simplified BSD License.
          </p>
        </div>        
      </div>
      <div class="row">
        <div class="col-sm-12 col-md-6">
          <p class="text indent-0">
            Table of Contents
          </p>
        </div>        
      </div>
      <div class="row">
        <div class="col-sm-12 col-md-12">
          <pre class="text text-monospace">
   1.  Introduction  . . . . . . . . . . . . . . . . . . . . . . . .   2
   2.  Terminology . . . . . . . . . . . . . . . . . . . . . . . . .   3
   3.  Goals and Requirements  . . . . . . . . . . . . . . . . . . .   3
     3.1.  Minimize Call Setup Latency . . . . . . . . . . . . . . .   3
     3.2.  Allow Controlling Endpoint to Make Dynamic Decisions  . .   3
     3.3.  Allow Selected Pair Change At Any Time Without Signaling    4
     3.4.  Allow Continuous Addition of Candidates . . . . . . . . .   4
     3.5.  Maintain Backwards Compatibility  . . . . . . . . . . . .   4
     3.6.  Minimize Complexity Increase  . . . . . . . . . . . . . .   5
   4.  Deprecating Aggressive Nomination . . . . . . . . . . . . . .   5
     4.1.  Overview  . . . . . . . . . . . . . . . . . . . . . . . .   5
     4.2.  Operation . . . . . . . . . . . . . . . . . . . . . . . .   5
     4.3.  Backwards Compatibility . . . . . . . . . . . . . . . . .   6
     4.4.  Examples  . . . . . . . . . . . . . . . . . . . . . . . .   6
   5.  Introducing Continuous Nomination . . . . . . . . . . . . . .   7
     5.1.  Overview  . . . . . . . . . . . . . . . . . . . . . . . .   7
     5.2.  Operation . . . . . . . . . . . . . . . . . . . . . . . .   8
     5.3.  Backwards Compatibility . . . . . . . . . . . . . . . . .   9
     5.4.  Examples  . . . . . . . . . . . . . . . . . . . . . . . .   9
       5.4.1.  Switching Between Pairs Based on RTT  . . . . . . . .   9
       5.4.2.  Switching To A New TURN Server  . . . . . . . . . . .   9
       5.4.3.  Switching From WLAN to WWAN . . . . . . . . . . . . .  10
   6.  Security Considerations . . . . . . . . . . . . . . . . . . .  10
   7.  IANA Considerations . . . . . . . . . . . . . . . . . . . . .  10
   8.  Acknowledgements  . . . . . . . . . . . . . . . . . . . . . .  10
   9.  References  . . . . . . . . . . . . . . . . . . . . . . . . .  10
     9.1.  Normative References  . . . . . . . . . . . . . . . . . .  10
     9.2.  Informative References  . . . . . . . . . . . . . . . . .  11
   Appendix A.  Change log . . . . . . . . . . . . . . . . . . . . .  11
   Authors&#39; Addresses  . . . . . . . . . . . . . . . . . . . . . . .  12
        </pre
          >
        </div>

      </div>
      <div class="row">
        <div class="col-sm-12 col-md-6">
          <h5 class="text mt-2">
            1. Introduction
          </h5>
        </div>        
      </div>
      <div class="row">
        <div class="col-sm-12 col-md-6">
          <p class="text indent-3">
            Interactive Connectivity Establishment (ICE) attempts to find the &#39;best&#39; path for connectivity between two peers; in ICE parlance, these paths are known as &#39;candidate pairs&#39;. During the ICE process, one endpoint, known as the &#39;controlling&#39; endpoint, selects a candidate pair as the best pair; this action is known as nomination. ICE supports two different mechanisms for performing nomination, known as Regular Nomination, and Aggressive Nomination.
          </p>
        </div>        
      </div>
      <div class="row">
        <div class="col-sm-12 col-md-6">
          <p class="text indent-3">
            However, each of these modes have flaws that restrict their usefulness. Regular Nomination, as currently speced, requires a best pair to be chosen before media transmission can start, causing unnecessary call setup delay. Aggressive Nomination, while avoiding this delay, gives the controlling endpoint much less discretion into
          </p>
        </div>        
      </div>
      <div class="row">
        <div class="col-sm-12 col-md-6">
          <p class="text indent-3">
            which candidate pair is chosen, preventing it from making decisions based on dynamic factors such as RTT or loss rate. Needless to say, the presence of both modes also adds nontrivial complexity.
          </p>
        </div>        
      </div>
      <div class="row">
        <div class="col-sm-12 col-md-6">
          <p class="text indent-3">
            Lastly, ICE is currently defined as a finite process, where the decision on the optimal candidate pair is made during call setup and infrequently (if ever) changed. While this may be acceptable for endpoints with static network configurations, it fails to meet the needs of mobile endpoints, who may need to seamlessly move between networks, or be connected to multiple networks simultaneously. In these cases, the controlling endpoint may want to maintain multiple potential candidate pairs, and make dynamic decisions to switch between them as conditions change.
          </p>
        </div>        
      </div>
      <div class="row">
        <div class="col-sm-12 col-md-6">
          <p class="text indent-3">
            To address these challenges, this document makes two proposals for refactoring ICE nomination - merging Regular and Aggressive Nomination, and introducing a new mode, known as Continuous Nomination. This makes ICE substantially more flexible without increasing complexity.
          </p>
        </div>        
      </div>
      <div class="row">
        <div class="col-sm-12 col-md-6">
          <h5 class="text mt-2">
            2. Terminology
          </h5>
        </div>        
      </div>
      <div class="row">
        <div class="col-sm-12 col-md-6">
          <p class="text indent-3">
            The key words &#34;MUST&#34;, &#34;MUST NOT&#34;, &#34;REQUIRED&#34;, &#34;SHALL&#34;, &#34;SHALL NOT&#34;, &#34;SHOULD&#34;, &#34;SHOULD NOT&#34;, &#34;RECOMMENDED&#34;, &#34;MAY&#34;, and &#34;OPTIONAL&#34; in this document are to be interpreted as described in [RFC2119].
          </p>
        </div>        
      </div>
      <div class="row">
        <div class="col-sm-12 col-md-6">
          <h5 class="text mt-2">
            3. Goals and Requirements
          </h5>
        </div>        
      </div>
      <div class="row">
        <div class="col-sm-12 col-md-6">
          <p class="text indent-3">
            The goals for improved ICE nomination are enumerated below.
          </p>
        </div>        
      </div>
      <div class="row">
        <div class="col-sm-12 col-md-6">
          <h5 class="text mt-2">
            3.1. Minimize Call Setup Latency
          </h5>
        </div>        
      </div>
      <div class="row">
        <div class="col-sm-12 col-md-6">
          <p class="text indent-3">
            Modern ICE agents will often have multiple network interfaces and multiple servers from which to obtain ICE candidates. While some ICE checks may succeed quickly, finishing the entire set of checks can easily take multiple seconds; this concern is discussed in [RFC5245], Section 8.1.1.1. As a result, ICE endpoints MUST be able to start transmitting media immediately upon a successful ICE check, and MUST retain the ability to switch if a better candidate pair becomes available later.
          </p>
        </div>        
      </div>
      <div class="row">
        <div class="col-sm-12 col-md-6">
          <h5 class="text mt-2">
            3.2. Allow Controlling Endpoint to Make Dynamic Decisions
          </h5>
        </div>        
      </div>
      <div class="row">
        <div class="col-sm-12 col-md-6">
          <p class="text indent-3">
            While an ICE endpoint will assign various priority values to its ICE candidates, these priorities are static and can only be based on a priori knowledge; the shortcomings of this approach are discussed in the first paragraph of Section 2.6 in [RFC5245]. To properly make choices in multi-network and multi-server scenarios, the controlling
          </p>
        </div>        
      </div>
      <div class="row">
        <div class="col-sm-12 col-md-6">
          <p class="text indent-3">
            endpoint MUST be able to make dynamic decisions about the selected candidate pair based on observed network performance. For example, RTT could be used to evaluate which TURN servers to use, as described in [I-D.williams-peer-redirect] To ensure symmetric flows, this implies that the controlling endpoint MUST be able to communicate its choice to the controlled side.
          </p>
        </div>        
      </div>
      <div class="row">
        <div class="col-sm-12 col-md-6">
          <h5 class="text mt-2">
            3.3. Allow Selected Pair Change At Any Time Without Signaling
          </h5>
        </div>        
      </div>
      <div class="row">
        <div class="col-sm-12 col-md-6">
          <p class="text indent-3">
            Expanding on the requirement above, the need to make dynamic decisions is not limited to call setup. A multihomed endpoint may need to switch interfaces based on mobility considerations, or a robust endpoint may want to keep multiple network paths warm and switch immediately if connectivity is interrupted on one of them. As the signaling channel may be affected by the event necessitating the switch, this implies that the controlling endpoint MUST be able to change the selected pair and indicate this to the remote side without signaling. The need for this functionality has been stated in [I-D.wing-mmusic-ice-mobility] and [I-D.singh-avtcore-mprtp].
          </p>
        </div>        
      </div>
      <div class="row">
        <div class="col-sm-12 col-md-6">
          <p class="text indent-3">
            The rules in [RFC5245] ensure that the controlled endpoint keeps its candidate needed for the selected pair alive. However, in order for alternate pairs to remain available, the controlled endpoint must keep the associated candidates alive as well, following the procedures outlined in [RFC5245], Section 4.1.1.4. This implies that the controlling endpoint MUST have some way to indicate to the controlled side that specific candidates are to be kept alive.
          </p>
        </div>        
      </div>
      <div class="row">
        <div class="col-sm-12 col-md-6">
          <h5 class="text mt-2">
            3.4. Allow Continuous Addition of Candidates
          </h5>
        </div>        
      </div>
      <div class="row">
        <div class="col-sm-12 col-md-6">
          <p class="text indent-3">
            In certain network mobility scenarios, networks may come up and down while the call is active. In order to allow candidates gathered on newly available networks to be used for the selected pair or backup pairs, the endpoint MUST be able to gather candidates on these networks and communicate them to the remote side. While this could be done using an ICE restart, as described in [RFC5245], Section 9.1, the ICE restart may have unintended consequences, such as causing the remote side to regather all candidates. Instead, it would be best if the new candidates could be trickled, as discussed in [I-D.ietf-mmusic-trickle-ice], but even after ICE processing has completed.
          </p>
        </div>        
      </div>
      <div class="row">
        <div class="col-sm-12 col-md-6">
          <h5 class="text mt-2">
            3.5. Maintain Backwards Compatibility
          </h5>
        </div>        
      </div>
      <div class="row">
        <div class="col-sm-12 col-md-6">
          <p class="text indent-3">
            To prevent interoperability problems, ICE endpoints that support the functionality listed above MUST still maintain [RFC5245] compliance when interacting with existing endpoints. However, the ideal
          </p>
        </div>        
      </div>
      <div class="row">
        <div class="col-sm-12 col-md-6">
          <p class="text indent-3">
            solution SHOULD allow some improvements to occur when only the controlling side supports the new functionality.
          </p>
        </div>        
      </div>
      <div class="row">
        <div class="col-sm-12 col-md-6">
          <h5 class="text mt-2">
            3.6. Minimize Complexity Increase
          </h5>
        </div>        
      </div>
      <div class="row">
        <div class="col-sm-12 col-md-6">
          <p class="text indent-3">
            Increased functionality typically leads to increased complexity, which leads to more edge cases, and more implementation bugs. This suggests that in addition to proposing new ICE functionality, the ideal solution SHOULD deprecate superfluous functionality.
          </p>
        </div>        
      </div>
      <div class="row">
        <div class="col-sm-12 col-md-6">
          <h5 class="text mt-2">
            4. Deprecating Aggressive Nomination
          </h5>
        </div>        
      </div>
      <div class="row">
        <div class="col-sm-12 col-md-6">
          <h5 class="text mt-2">
            4.1. Overview
          </h5>
        </div>        
      </div>
      <div class="row">
        <div class="col-sm-12 col-md-6">
          <p class="text indent-3">
            The main benefits of Regular Nomination are that the controlling side can dynamically choose which candidate pair to use, and a clear signal when the nomination process has completed, via the presence of the USE-CANDIDATE flag in a Binding Request. The main benefit of Aggressive Nomination is that it is only necessary to send a single Binding Request before starting the transmission of media, reducing setup latency. Why don&#39;t we have both?
          </p>
        </div>        
      </div>
      <div class="row">
        <div class="col-sm-12 col-md-6">
          <p class="text indent-3">
            By preserving the dynamic behavior of Regular Nomination, but allowing media transmission to start upon a single successful connectivity check, as in Aggressive Nomination, the requirements of Section 3.1 and Section 3.2 can be met, while meeting the compatibility requirement from Section 3.5 and, since Aggressive Nomination is no longer needed, the complexity requirement from Section 3.6.
          </p>
        </div>        
      </div>
      <div class="row">
        <div class="col-sm-12 col-md-6">
          <h5 class="text mt-2">
            4.2. Operation
          </h5>
        </div>        
      </div>
      <div class="row">
        <div class="col-sm-12 col-md-6">
          <p class="text indent-3">
            Since media may be transmitted as soon as all components have a valid pair, as indicated in [RFC5245], Page 69, an ICE Agent can begin transmitting media as soon as this occurs, even if it has not sent a Binding Request with USE-CANDIDATE.
          </p>
        </div>        
      </div>
      <div class="row">
        <div class="col-sm-12 col-md-6">
          <p class="text indent-3">
            This pair can change as more pairs are added to the Valid list on the controlling side. When nomination completes, and a final pair is selected, this is communicated to the controlled side via the typical Binding Request with USE-CANDIDATE.
          </p>
        </div>        
      </div>
      <div class="row">
        <div class="col-sm-12 col-md-6">
          <p class="text indent-3">
            On the controlled side, the same process can occur, with the ICE Agent transmitting media as soon as a valid pair exists. To encourage use of symmetric RTP, the controlled ICE Agent SHOULD use the same candidate pair on which it received media from the controlling side. [Doesn&#39;t need to be secure media, since the
          </p>
        </div>        
      </div>
      <div class="row">
        <div class="col-sm-12 col-md-6">
          <p class="text indent-3">
            controlling side will finalize this preference through USE-CANDIDATE shortly.]
          </p>
        </div>        
      </div>
      <div class="row">
        <div class="col-sm-12 col-md-6">
          <p class="text indent-3">
            As this is legal ICE behavior, no negotiation of this mechanism should be needed. In the event the receiver drops any packets that arrive before a Binding Request with USE-CANDIDATE set, this will simply lead to brief media clipping and will resolve itself once nomination completes.
          </p>
        </div>        
      </div>
      <div class="row">
        <div class="col-sm-12 col-md-6">
          <h5 class="text mt-2">
            4.3. Backwards Compatibility
          </h5>
        </div>        
      </div>
      <div class="row">
        <div class="col-sm-12 col-md-6">
          <p class="text indent-3">
            When acting in the controlled role, new implementations MUST NOT use Aggressive Nomination.
          </p>
        </div>        
      </div>
      <div class="row">
        <div class="col-sm-12 col-md-6">
          <p class="text indent-3">
            When acting in the controlled role, and the controlling side is using Aggressive Nomination (e.g. sending USE-CANDIDATE in its initial Binding Requests), the standard PRIORITY-based mechanism outlined in [RFC5245], Section 8.1.1.2 should be used to determine the reverse media path.
          </p>
        </div>        
      </div>
      <div class="row">
        <div class="col-sm-12 col-md-6">
          <p class="text indent-3">
            Note that if implementations would prefer to just avoid Aggressive Nomination altogether, they MAY indicate some TBD pseudo-option in the ice-options attribute. Because compliant implementations MUST NOT use Aggressive Nomination if an unknown ICE option is encountered, this effectively prohibits the use of Aggressive Nomination. [N.B. this could be the ice-options:continuous option described below]
          </p>
        </div>        
      </div>
      <div class="row">
        <div class="col-sm-12 col-md-6">
          <h5 class="text mt-2">
            4.4. Examples
          </h5>
        </div>        
      </div>
      <div class="row">
        <div class="col-sm-12 col-md-6">
          <p class="text indent-3">
            An example call setup using Regular Nomination as described above is shown here. Alice is in the controlling role, and Bob is in the controlled role; Alice has a single host candidate and Bob has both host and relay candidates.
          </p>
        </div>        
      </div>
      <div class="row">
        <div class="col-sm-12 col-md-6">
          <p class="text indent-3">
            Alice&#39;s initial check to Bob&#39;s host candidate fails, but the check to his relay candidate succeeds, so Alice starts transmitting media on her host-relay pair. Bob&#39;s initial check from his host candidate to Alice&#39;s host candidate succeeds, so he starts transmitting media over this host-host pair to Alice. However, when Alice&#39;s host check is later retransmitted, it succeeds, and Alice determines that the host-host pair has a better RTT than the host-relay pair, so she cuts media over to use the host-host pair. Eventually, Alice concludes Regular Nomination by sending a final check to Bob with the USE-CANDIDATE flag set. If Bob had selected a different pair to use than Alice, this action would have forced Bob to use the same pair.
          </p>
        </div>        
      </div>
      <div class="row">
        <div class="col-sm-12 col-md-12">
          <pre class="text text-monospace">
    Alice                        Network                         Bob
      |(1) STUN Req (Bob host)      |                             |
      |----------------------------------------------------------&gt;|
      |(2) STUN Res (Bob host)      |                             |
      |                         Lost|&lt;----------------------------|
      |(3) STUN Req (Bob relay)     |                             |
      |----------------------------------------------------------&gt;|
      |(4) STUN Res (Bob relay)     |                             |
      |&lt;----------------------------------------------------------|
      |(5) RTP starts (Bob relay)   |                             |
      |==========================================================&gt;|
      |(6) STUN Req (Alice host)    |                             |
      |&lt;----------------------------------------------------------|
      |(7) STUN Res (Alice host)    |                             |
      |----------------------------------------------------------&gt;|
      |(8) RTP starts (Alice host)  |                             |
      |&lt;==========================================================|
      |(9) STUN Req (Bob host)      |                             |
      |----------------------------------------------------------&gt;|
      |(10) STUN Req (Bob host)     |                             |
      |&lt;----------------------------------------------------------|
      |(11) RTP switch (Bob host)   |                             |
      |==========================================================&gt;|
      |(12) STUN Req (Bob host, U-C)|                             |
      |----------------------------------------------------------&gt;|
      |(13) STUN Res (Bob host)     |                             |
      |&lt;----------------------------------------------------------|
        </pre
          >
        </div>

      </div>
      <div class="row">
        <div class="col-sm-12 col-md-6">
          <h5 class="text mt-2">
            5. Introducing Continuous Nomination
          </h5>
        </div>        
      </div>
      <div class="row">
        <div class="col-sm-12 col-md-6">
          <h5 class="text mt-2">
            5.1. Overview
          </h5>
        </div>        
      </div>
      <div class="row">
        <div class="col-sm-12 col-md-6">
          <p class="text indent-3">
            As discussed above, in mobile environments there can be multiple possible valid candidate pairs, and these can change at various points in the call, as new interfaces go up and down, signal strength for wireless interfaces changes, and new relay servers are discovered.
          </p>
        </div>        
      </div>
      <div class="row">
        <div class="col-sm-12 col-md-6">
          <p class="text indent-3">
            However, under 5245 rules, once a candidate pair is selected and confirmed, via USE-CANDIDATE, nomination has completed and cannot be restarted without performing an ICE restart. This is overly complex in many cases, and especially problematic in some specific ones, namely a wifi-cellular handover, where the signaling path for communicating an ICE restart may be impacted by the handover.
          </p>
        </div>        
      </div>
      <div class="row">
        <div class="col-sm-12 col-md-6">
          <p class="text indent-3">
            To address this situation, this section introduces the concept of &#34;continuous nomination&#34;, where the controlling ICE endpoint can adjust the selected candidate pair at any time. By allowing ICE
          </p>
        </div>        
      </div>
      <div class="row">
        <div class="col-sm-12 col-md-6">
          <p class="text indent-3">
            processing to occur continuously during a call, rather than just at call setup, the requirements expressed in Section 3.3 and Section 3.4 can be met.
          </p>
        </div>        
      </div>
      <div class="row">
        <div class="col-sm-12 col-md-6">
          <h5 class="text mt-2">
            5.2. Operation
          </h5>
        </div>        
      </div>
      <div class="row">
        <div class="col-sm-12 col-md-6">
          <p class="text indent-3">
            Under continuous nomination, ICE never concludes; new candidates can always be trickled, and a new candidate pair can be selected by the controlling side at any time.
          </p>
        </div>        
      </div>
      <div class="row">
        <div class="col-sm-12 col-md-6">
          <p class="text indent-3">
            When selecting a new candidate pair, the controlling side informs the controlled side of the chosen path by sending a new Binding Request with a USE-CANDIDATE attribute. The decision about which candidate pair to use is fully dynamic; the controlling side can use metrics such as RTT or loss rate to change the selected pair at any time. If Binding Requests need to be sent for any other reason, such as consent checks [I-D.ietf-rtcweb-stun-consent-freshness], any checks sent on the selected pair MUST include a USE-CANDIDATE attribute.
          </p>
        </div>        
      </div>
      <div class="row">
        <div class="col-sm-12 col-md-6">
          <p class="text indent-3">
            Upon receipt of a Binding Request with USE-CANDIDATE, the controlled side MUST switch its media path to the candidate pair on which the Binding Request was received.
          </p>
        </div>        
      </div>
      <div class="row">
        <div class="col-sm-12 col-md-6">
          <p class="text indent-3">
            During continuous nomination, the controlling side may still elect to prune certain candidate pairs; for example, an implementation may choose to drop relay candidates once a successful connection has been established. The controlled side, however, should follow the controlling side&#39;s lead in terms of deciding whether any pairs should be pruned. [TODO: should the controlled side have any say in the matter, e.g. to eliminate certain candidates?] The controlling ICE Agent informs the remote side of its preferences by continuing to send Binding Requests to the remote side on each candidate pair that it wants to retain. The controlled ICE Agent SHOULD prune any candidate pairs that have not received a Binding Request in N seconds (30?), and SHOULD NOT keep alive any candidates that are not associated with a live candidate pair. [TODO: decide if this implicit timeout approach is correct, or if we should have some sort of approach similar to TURN LIFETIME indicating when a pair should be GCed, with LIFETIME==0 indicating immediate GC.] One side benefit of doing this is that the continuous exchange of Binding Requests across all candidate pairs allows the RTT and loss rate for each to be reliably determined and kept up to date.
          </p>
        </div>        
      </div>
      <div class="row">
        <div class="col-sm-12 col-md-6">
          <p class="text indent-3">
            If the endpoints have negotiated Trickle ICE support [I-D.ietf-mmusic-trickle-ice], and new candidates become available on either side, the endpoint may send these candidates to the remote side using the existing Trickle ICE mechanisms. Once all of the new candidates have been transmitted, the endpoint MUST send an end-of-
          </p>
        </div>        
      </div>
      <div class="row">
        <div class="col-sm-12 col-md-6">
          <p class="text indent-3">
            candidates messages, which indicates that no more candidates will be sent in the near future.
          </p>
        </div>        
      </div>
      <div class="row">
        <div class="col-sm-12 col-md-6">
          <p class="text indent-3">
            At any point, either side may perform an ICE restart, which will result in both sides gathering new ICE candidates, starting a new continuous nomination sequence, and upon successful completion, discarding all candidates from the previous nomination sequence.
          </p>
        </div>        
      </div>
      <div class="row">
        <div class="col-sm-12 col-md-6">
          <h5 class="text mt-2">
            5.3. Backwards Compatibility
          </h5>
        </div>        
      </div>
      <div class="row">
        <div class="col-sm-12 col-md-6">
          <p class="text indent-3">
            Since standard ICE implementations may not expect the selected pair to change after a USE-CANDIDATE attribute is received, support for continuous nomination is explicitly indicated via a new &#34;continuous&#34; value for ice-options. If the remote side does not support the &#34;continuous&#34; option, the controlling side MUST fall back to Regular Nomination, as specified in [RFC5245], Sectiom 8.1.1.
          </p>
        </div>        
      </div>
      <div class="row">
        <div class="col-sm-12 col-md-6">
          <h5 class="text mt-2">
            5.4. Examples
          </h5>
        </div>        
      </div>
      <div class="row">
        <div class="col-sm-12 col-md-6">
          <h5 class="text mt-2">
            5.4.1. Switching Between Pairs Based on RTT
          </h5>
        </div>        
      </div>
      <div class="row">
        <div class="col-sm-12 col-md-6">
          <p class="text indent-3">
            Alice and Bob have set up a call using ICE and have established multiple valid pairs. The currently selected pair is for a peer-to-peer route, as it had the highest initial priority value. However, they have also kept alive a selected pair that goes through their TURN servers. At a certain point, Alice detects, via the connectivity checks that she continues to do on the relayed pair, that it actually has a better RTT than the peer-to-peer path. She then decides to switch media over to this path.
          </p>
        </div>        
      </div>
      <div class="row">
        <div class="col-sm-12 col-md-6">
          <p class="text indent-3">
            As mentioned above, this is easily handled by Alice immediately switching her media to the relayed path; future STUN checks on this path also include the USE-CANDIDATE attribute.
          </p>
        </div>        
      </div>
      <div class="row">
        <div class="col-sm-12 col-md-6">
          <h5 class="text mt-2">
            5.4.2. Switching To A New TURN Server
          </h5>
        </div>        
      </div>
      <div class="row">
        <div class="col-sm-12 col-md-6">
          <p class="text indent-3">
            Alice and Bob have set up a call using ICE, and are currently sending their media through Alice&#39;s TURN server. At a certain point, Alice&#39;s application discovers a new TURN server that it thinks might provide a better path for this call.
          </p>
        </div>        
      </div>
      <div class="row">
        <div class="col-sm-12 col-md-6">
          <p class="text indent-3">
            Alice gathers new candidates from this TURN server, and trickles them to Bob. They perform connectivity checks using these candidates, and Alice determines that the RTT when going through this TURN server is better than the RTT of the current relayed path.
          </p>
        </div>        
      </div>
      <div class="row">
        <div class="col-sm-12 col-md-6">
          <p class="text indent-3">
            As in the previous example, this is easily handled by Alice switching media to the new path, along with sending USE-CANDIDATE. If the old
          </p>
        </div>        
      </div>
      <div class="row">
        <div class="col-sm-12 col-md-6">
          <p class="text indent-3">
            path is no longer needed, Alice can destroy the allocation on the old TURN server, and Bob will stop checking it when it stops working.
          </p>
        </div>        
      </div>
      <div class="row">
        <div class="col-sm-12 col-md-6">
          <h5 class="text mt-2">
            5.4.3. Switching From WLAN to WWAN
          </h5>
        </div>        
      </div>
      <div class="row">
        <div class="col-sm-12 col-md-6">
          <p class="text indent-3">
            Alice and Bob have set up a call using ICE, and are currently exchanging their media directly via a peer-to-peer path. Alice is on a mobile device, with both wifi and cellular interfaces, but for power reasons, candidates have only been gathered on the wifi interface. At a certain point, Alice leaves her home while the call is active.
          </p>
        </div>        
      </div>
      <div class="row">
        <div class="col-sm-12 col-md-6">
          <p class="text indent-3">
            In response to the decreasing wifi signal strength, Alice starts to collect candidates on the cellular interface, and trickles them to Bob. They perform connectivity checks using these candidates, and, because of the low wifi signal strength, these candidates are preferred over the existing selected pair.
          </p>
        </div>        
      </div>
      <div class="row">
        <div class="col-sm-12 col-md-6">
          <p class="text indent-3">
            As in the previous examples, Alice can easily switch media to the new selected pair. When Alice walks completely out of wifi range, and the wifi interface goes down, the wifi candidates are pruned, and any valid pairs on Bob&#39;s side that use those candidates will time out and be pruned as well.
          </p>
        </div>        
      </div>
      <div class="row">
        <div class="col-sm-12 col-md-6">
          <h5 class="text mt-2">
            6. Security Considerations
          </h5>
        </div>        
      </div>
      <div class="row">
        <div class="col-sm-12 col-md-6">
          <p class="text indent-3">
            TODO
          </p>
        </div>        
      </div>
      <div class="row">
        <div class="col-sm-12 col-md-6">
          <h5 class="text mt-2">
            7. IANA Considerations
          </h5>
        </div>        
      </div>
      <div class="row">
        <div class="col-sm-12 col-md-6">
          <p class="text indent-3">
            A new ICE option &#34;continuous&#34; has been [will be] registered in the &#34;ICE Options&#34; registry created by [RFC6336].
          </p>
        </div>        
      </div>
      <div class="row">
        <div class="col-sm-12 col-md-6">
          <h5 class="text mt-2">
            8. Acknowledgements
          </h5>
        </div>        
      </div>
      <div class="row">
        <div class="col-sm-12 col-md-6">
          <p class="text indent-3">
            Several people provided significant input into this document, including Martin Thomson, Brandon Williams, and Dan Wing. Emil Ivov also provided several of the examples for continuous nomination.
          </p>
        </div>        
      </div>
      <div class="row">
        <div class="col-sm-12 col-md-6">
          <h5 class="text mt-2">
            9. References
          </h5>
        </div>        
      </div>
      <div class="row">
        <div class="col-sm-12 col-md-6">
          <h5 class="text mt-2">
            9.1. Normative References
          </h5>
        </div>        
      </div>
      <div class="row">
        <div class="col-sm-12 col-md-6">
          <p class="text indent-3">
            [RFC2119] Bradner, S., &#34;Key words for use in RFCs to Indicate Requirement Levels&#34;, BCP 14, RFC 2119, March 1997.
          </p>
        </div>        
      </div>
      <div class="row">
        <div class="col-sm-12 col-md-6">
          <p class="text indent-3">
            [RFC5245] Rosenberg, J., &#34;Interactive Connectivity Establishment (ICE): A Protocol for Network Address Translator (NAT) Traversal for Offer/Answer Protocols&#34;, RFC 5245, April 2010.
          </p>
        </div>        
      </div>
      <div class="row">
        <div class="col-sm-12 col-md-6">
          <p class="text indent-3">
            [RFC6336] Westerlund, M. and C. Perkins, &#34;IANA Registry for Interactive Connectivity Establishment (ICE) Options&#34;, RFC 6336, July 2011.
          </p>
        </div>        
      </div>
      <div class="row">
        <div class="col-sm-12 col-md-6">
          <h5 class="text mt-2">
            9.2. Informative References
          </h5>
        </div>        
      </div>
      <div class="row">
        <div class="col-sm-12 col-md-6">
          <p class="text indent-3">
            [I-D.ietf-mmusic-trickle-ice] Ivov, E., Rescorla, E., and J. Uberti, &#34;Trickle ICE: Incremental Provisioning of Candidates for the Interactive Connectivity Establishment (ICE) Protocol&#34;, draft-ietf-mmusic-trickle-ice-02 (work in progress), January 2015.
          </p>
        </div>        
      </div>
      <div class="row">
        <div class="col-sm-12 col-md-6">
          <p class="text indent-3">
            [I-D.ietf-rtcweb-stun-consent-freshness] Perumal, M., Wing, D., R, R., Reddy, T., and M. Thomson, &#34;STUN Usage for Consent Freshness&#34;, draft-ietf-rtcweb-stun-consent-freshness-11 (work in progress), December 2014.
          </p>
        </div>        
      </div>
      <div class="row">
        <div class="col-sm-12 col-md-6">
          <p class="text indent-3">
            [I-D.singh-avtcore-mprtp] Singh, V., Karkkainen, T., Ott, J., Ahsan, S., and L. Eggert, &#34;Multipath RTP (MPRTP)&#34;, draft-singh-avtcore-mprtp-10 (work in progress), November 2014.
          </p>
        </div>        
      </div>
      <div class="row">
        <div class="col-sm-12 col-md-6">
          <p class="text indent-3">
            [I-D.williams-peer-redirect] Williams, B. and T. Reddy, &#34;Peer-specific Redirection for Traversal Using Relays around NAT (TURN)&#34;, draft-williams-peer-redirect-03 (work in progress), December 2014.
          </p>
        </div>        
      </div>
      <div class="row">
        <div class="col-sm-12 col-md-6">
          <p class="text indent-3">
            [I-D.wing-mmusic-ice-mobility] Wing, D., Reddy, T., Patil, P., and P. Martinsen, &#34;Mobility with ICE (MICE)&#34;, draft-wing-mmusic-ice-mobility-07 (work in progress), June 2014.
          </p>
        </div>        
      </div>
      <div class="row">
        <div class="col-sm-12 col-md-6">
          <h5 class="text mt-2">
            Appendix A. Change log
          </h5>
        </div>        
      </div>
      <div class="row">
        <div class="col-sm-12 col-md-6">
          <p class="text indent-3">
            Changes in draft -00:
          </p>
        </div>        
      </div>
      <div class="row">
        <div class="col-sm-12 col-md-6">
          <p class="text indent-3">
            o Initial version, from mailing list discussion post-IETF 90.
          </p>
        </div>        
      </div>
      <div class="row">
        <div class="col-sm-12 col-md-6">
          <p class="text indent-0">
            Authors&#39; Addresses
          </p>
        </div>        
      </div>
      <div class="row">
        <div class="col-sm-12 col-md-6">
          <p class="text indent-3">
            Justin Uberti Google 747 6th Ave S Kirkland, WA 98033 USA
          </p>
        </div>        
      </div>
      <div class="row">
        <div class="col-sm-12 col-md-12">
          <pre class="text text-monospace">
   Email: justin@uberti.name
        </pre
          >
        </div>

      </div>
      <div class="row">
        <div class="col-sm-12 col-md-6">
          <p class="text indent-3">
            Jonathan Lennox Vidyo 433 Hackensack Avenue Hackensack, NJ 07601 USA
          </p>
        </div>        
      </div>
      <div class="row">
        <div class="col-sm-12 col-md-12">
          <pre class="text text-monospace">
   Email: jonathan@vidyo.com
        </pre
          >
        </div>

      </div>
    </div>
    <div id="rfc_footer"></div>
  </body>
</html>
